@if (isEdit) {
<h4>Edit user form</h4>
}@else {
<h4>Create user form</h4>
}
<form action="" method="GET" [formGroup]="addUserF" (submit)="onSubmit()">
    <div class="form-half-left">
        <div class="form-group">
            <label for="username">User Name: </label>
            <input type="text" formControlName="username" name="username" id="username" autocomplete="username"
                readonly />
        </div>
        <div class="form-group">
            <label for="email">Email: </label>
            <input type="email" formControlName="email" name="email" id="email" required autocomplete="email" />

            <div *ngIf="addUserF['controls']['email'].dirty && addUserF['controls']['email'].errors">
                <small *ngIf="addUserF['controls']['email'].errors['required']">Email cannot be Empty</small>
                <small *ngIf="addUserF['controls']['email'].errors['email']">Please
                    enter a valid email address</small>
            </div>
        </div>

        <div class="form-group">
            <label for="dob">DOB: </label>
            <input type="date" formControlName="dob" name="dob" id="dob" required />

            <div *ngIf="addUserF['controls']['dob'].dirty && addUserF['controls']['dob'].errors">
                <small *ngIf="addUserF['controls']['dob'].errors['required']">Please choose date</small>
                <small *ngIf="addUserF['controls']['dob'].errors['futureDate']">Date must be before current date</small>
                <small *ngIf="addUserF['controls']['dob'].errors['invalidDateFormat']">Date must be before current
                    date</small>
            </div>
        </div>
        <div class="form-group">
            <label for="department">Department: </label>
            <select name="department" formControlName="department" id="department">
                <option value="">Select</option>
                <option *ngFor="let department of departments" [value]="department.id">
                    {{ department.departmentName }}
                </option>
            </select>

            <div *ngIf="addUserF['controls']['department'].dirty && addUserF['controls']['department'].errors">
                <small *ngIf="addUserF['controls']['department'].errors['required']">Please choose department</small>
            </div>
        </div>

        <div class="form-group">
            <label for="role-select">Role: </label>
            <select name="role" formControlName="role" id="role-select">
                <option value="">Select</option>
                <option *ngFor="let role of roles" [value]="role.id"
                    >{{ role.roleName }}</option>
            </select>
            

            <div *ngIf="addUserF['controls']['role'].dirty && addUserF['controls']['role'].errors">
                <small *ngIf="addUserF['controls']['role'].errors['required']">Please choose role</small>
            </div>
        </div>
        <div class="form-group">
            <label for="note">Notes: </label>
            <textarea id="note" formControlName="notes" name="note" id="note" rows="4"></textarea>
        </div>
    </div>

    <div class="form-half-right">
        <div class="form-group">
            <label for="fullname">Full Name: </label>
            <input type="text" class="form-control" formControlName="fullName" name="fullname" id="fullname" required />
            <div *ngIf="addUserF['controls']['fullName'].dirty && addUserF['controls']['fullName'].errors">
                <small *ngIf="addUserF['controls']['fullName'].errors['required']">FullName cannot be Empty</small>
                <small *ngIf="addUserF['controls']['fullName'].errors['pattern']">FullName cannot include number</small>
            </div>
        </div>
        <div class="form-group">
            <label for="phonenumber">Phone Number: </label>
            <input type="text" class="form-control" formControlName="phoneNumber" name="phonenumber" id="phonenumber"
                required />

            <div *ngIf="addUserF['controls']['phoneNumber'].dirty && addUserF['controls']['phoneNumber'].errors">
                <small *ngIf="addUserF['controls']['phoneNumber'].errors['pattern']">Phone Number should be
                    numbers</small>
            </div>
        </div>
        <div class="form-group">
            <label for="address">Address: </label>
            <input type="text" formControlName="address" name="address" id="address" autocomplete="address" />
        </div>
        <div class="form-group">
            <label for="position-select">Position: </label>

            <select name="position" formControlName="position" id="position-select">
                <option value="">Select</option>
                <option *ngFor="let position of positions" [value]="position.id"
                   >{{ position.positionName }}
                </option>
            </select>

            <div *ngIf="addUserF['controls']['position'].dirty && addUserF['controls']['position'].errors">
                <small *ngIf="addUserF['controls']['position'].errors['required']">Please choose position</small>
            </div>
        </div>
        <div class="form-group">
            <label for="status">Status: </label>
            <option id="status" value="1">{{ getStatusLabel('1') }}</option>
        </div>

    </div>
    <div class="form-submit">
        @if (isEdit) {
        <input type="submit" [disabled]="addUserF.invalid" value="Update" />
        <a routerLink="/user-list"><button class="btn btn-primary">Cancel</button></a>
        }@else {
        <input type="submit" [disabled]="addUserF.invalid" value="Submit" />
        <a routerLink="/user-list"><button class="btn btn-primary">Cancel</button></a>
        }

    </div>
</form>